(this["webpackJsonpbitcoin-market-analyzer"]=this["webpackJsonpbitcoin-market-analyzer"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(9),i=n.n(c),s=n(3),o=(n(16),n(17),n(10)),l=n(4);l.b.positioners.bottom=function(e){var t=this._chart,n=l.b.positioners.average(e);return!!n&&{x:n.x,y:t.chartArea.bottom}};var u={data:{datasets:[{label:"Price",type:"line",backgroundColor:"rgb(242, 169, 0)",borderColor:"rgb(242, 169, 0)",pointRadius:"0",segment:{borderColor:function(e){return e.p0.parsed.y<e.p1.parsed.y?"rgb(0, 255, 0)":"rgb(255, 0, 0)"}}},{label:"Volume",backgroundColor:"rgb(0, 0, 0, 0.2)",hoverBackgroundColor:"rgb(0, 0, 0, 0.6)",type:"bar",yAxisID:"y2"}]},options:{interaction:{intersect:!1,mode:"index"},scales:{x:{ticks:{autoSkipPadding:12,maxRotation:30}},y:{type:"linear",position:"left",title:{display:!0,text:"Price [\u20ac / BTC]"}},y2:{type:"linear",position:"right",title:{display:!0,text:"Volume [\u20ac]"}}},plugins:{legend:{display:!1},title:{display:!0,text:"Daily price and trading volume of Bitcoin",color:"black",font:{family:'"Ubuntu", sans-serif',weight:"bold",size:18}},tooltip:{position:"bottom",xAlign:"center",yAlign:"bottom",usePointStyle:!0,caretPadding:4,callbacks:{label:function(e){return"".concat(e.dataset.label," ").concat(e.formattedValue," \u20ac")},labelPointStyle:function(){return{pointStyle:"circle",pointRadius:0}}}}},elements:{point:{hoverRadius:"6"}}}},d=n(0);var b=function(e){var t=e.pricesByDate,n=e.volumesByDate,a=Object(r.useRef)(),c=Object(r.useRef)();return Object(r.useEffect)((function(){return c.current=new o.a(a.current,u),c.current.options.maintainAspectRatio=!1,function(){return c.current.destroy()}}),[]),Object(r.useEffect)((function(){c.current.data.datasets[0].data=t,c.current.data.datasets[1].data=n,c.current.update()}),[t,n]),Object(d.jsx)("div",{className:"chart-container",children:Object(d.jsx)("canvas",{ref:a})})},j=n(8),h=n.n(j),p=n(11);function f(e){return new Date(e).toISOString().slice(0,10)}var m="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range";function O(){return(O=Object(p.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"?vs_currency=eur&from=").concat(t/1e3,"&to=").concat(n/1e3+3600));case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",{prices:v(a.prices),volumes:v(a.total_volumes)});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){var t={};return e.forEach((function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1],c=function(e){return new Date(e).toUTCString().slice(5,16)}(r);t[c]=t[c]||a})),t}var x="2013-04-28",g=function(e){var t=new Date(e);return t.setMonth(t.getMonth()-1),t.getTime()}(Date.now()),y=Date.now();var D=function(){var e=Object(r.useState)(g),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(y),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)([]),j=Object(s.a)(u,2),h=j[0],p=j[1],m=Object(r.useState)([]),v=Object(s.a)(m,2),D=v[0],k=v[1];Object(r.useEffect)((function(){(function(e,t){return O.apply(this,arguments)})(n,o).then((function(e){var t=e.prices,n=e.volumes;p(t),k(n)}))}),[n,o]);var w,B=function(e){var t,n,r,a={startDate:null,endDate:null,trendLength:0};return Object.entries(e).forEach((function(e,c,i){var o=Object(s.a)(e,2),l=o[0],u=o[1];if(0===c||u>=i[c-1][1])return t=l,void(r=0);r++,n=l,r>a.trendLength&&(a={startDate:t,endDate:n,trendLength:r})})),a}(h),S=(w=D,Object.entries(w).reduce((function(e,t){var n=Object(s.a)(t,2),r=n[0],a=n[1];return a>e.volume?{date:r,volume:a}:e}),{date:null,volume:0})),C=function(e){var t,n,r={buyDate:null,sellDate:null,profit:0};return Object.entries(e).forEach((function(e,a){var c=Object(s.a)(e,2),i=c[0],o=c[1];if(0===a||o<n)return n=o,void(t=i);var l=o-n;l>r.profit&&(r={buyDate:t,sellDate:i,profit:l})})),r}(h);return Object(d.jsxs)("div",{children:[Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("img",{src:"/logo.svg",width:"60",height:"60",alt:"Bitcoin Icon"})," ",Object(d.jsx)("h1",{children:"Bitcoin Market Analyzer"})]}),Object(d.jsxs)("main",{children:[Object(d.jsx)("h3",{children:"The date range to be analyzed"}),Object(d.jsxs)("div",{className:"date-inputs",children:[Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("label",{htmlFor:"fromInput",children:"Start date"}),Object(d.jsx)("input",{id:"fromInput",type:"date",value:f(n),min:x,max:f(y),onChange:function(e){return a(new Date(e.target.value).getTime()||g)}})]}),Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("label",{htmlFor:"toInput",children:"End date"}),Object(d.jsx)("input",{id:"toInput",type:"date",value:f(o),min:x,max:f(y),onChange:function(e){return l(new Date(e.target.value).getTime()||y)}})]})]}),Object(d.jsxs)("div",{className:"cards",children:[Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h3",{children:"Longest bearish trend"}),Object(d.jsxs)("p",{class:"card-focal",children:[B.trendLength," days"]}),Object(d.jsxs)("p",{children:[B.startDate," - ",B.endDate]})]}),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h3",{children:"Highest trading volume"}),Object(d.jsxs)("p",{class:"card-focal",children:[S.volume.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g," ")," ","\u20ac"]}),Object(d.jsx)("p",{children:S.date})]}),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsx)("h3",{children:"Maximum profit"}),Object(d.jsxs)("p",{class:"card-focal",children:[C.profit.toFixed(2)," \u20ac / BTC"]}),Object(d.jsx)("div",{children:C.buyDate?Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:["If Bitcoins were bought on"," ",Object(d.jsx)("time",{children:C.buyDate})," and sold on"," ",Object(d.jsx)("time",{children:C.sellDate})]})}):Object(d.jsx)("p",{children:"Bitcoin should not be bought on the selected date range"})})]})]}),Object(d.jsx)(b,{pricesByDate:h,volumesByDate:D})]})]})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(D,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.9c64bc96.chunk.js.map