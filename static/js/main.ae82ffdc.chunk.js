(this["webpackJsonpbitcoin-market-analyzer"]=this["webpackJsonpbitcoin-market-analyzer"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),i=n.n(c),s=n(3),o=n(8),l=n.n(o),u=n(10);function d(e){return new Date(e).toISOString().slice(0,10)}var b="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range";function j(){return(j=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"?vs_currency=eur&from=").concat(t/1e3,"&to=").concat(n/1e3+3600));case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",{prices:p(r.prices),volumes:p(r.total_volumes)});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t={};return e.forEach((function(e){var n=Object(s.a)(e,2),a=n[0],r=n[1],c=function(e){return new Date(e).toUTCString().slice(5,16)}(a);t[c]=t[c]||r})),t}n(17);var h=n(0),f="2013-04-28";var m=function(e){var t=e.startDate,n=e.endDate,a=e.onStartDateChange,r=e.onEndDateChange;return Object(h.jsxs)("div",{className:"date-inputs",children:[Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"fromInput",children:"Start date"}),Object(h.jsx)("input",{id:"fromInput",type:"date",value:t,min:f,max:d(Date.now()),onChange:a})]}),Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("label",{htmlFor:"toInput",children:"End date"}),Object(h.jsx)("input",{id:"toInput",type:"date",value:n,min:f,max:d(Date.now()),onChange:r})]})]})};function v(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}n(19);var g=function(e){var t,n=e.prices,a=e.volumes,r=function(e){var t,n,a,r={startDate:null,endDate:null,trendLength:0};return Object.entries(e).forEach((function(e,c,i){var o=Object(s.a)(e,2),l=o[0],u=o[1];if(0===c||u>=i[c-1][1])return t=l,void(a=0);a++,n=l,a>r.trendLength&&(r={startDate:t,endDate:n,trendLength:a})})),r}(n),c=(t=a,Object.entries(t).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return r>e.volume?{date:a,volume:r}:e}),{date:null,volume:0})),i=function(e){var t,n,a={buyDate:null,sellDate:null,profit:0};return Object.entries(e).forEach((function(e,r){var c=Object(s.a)(e,2),i=c[0],o=c[1];if(0===r||o<n)return n=o,void(t=i);var l=o-n;l>a.profit&&(a={buyDate:t,sellDate:i,profit:l})})),a}(n),o=i.buyDate?"If bought on ".concat(i.buyDate," and sold\n      on ").concat(i.sellDate):"Bitcoins should not be bought on the selected date range";return Object(h.jsxs)("div",{className:"cards",children:[Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h3",{className:"card-title",children:"Longest bearish trend"}),Object(h.jsxs)("p",{className:"card-focal",children:[r.trendLength," days"]}),Object(h.jsxs)("p",{children:[r.startDate," - ",r.endDate]})]}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h3",{className:"card-title",children:"Highest trading volume"}),Object(h.jsxs)("p",{className:"card-focal",children:[v(c.volume.toFixed(0))," \u20ac"]}),Object(h.jsx)("p",{children:c.date})]}),Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h3",{className:"card-title",children:"Maximum profit"}),Object(h.jsxs)("p",{className:"card-focal",children:[v(i.profit.toFixed(2))," \u20ac / BTC"]}),Object(h.jsx)("p",{children:o})]})]})},O=(n(20),n(11)),x=n(4);x.b.positioners.bottom=function(e){var t=this._chart,n=x.b.positioners.average(e);return!!n&&{x:n.x,y:t.chartArea.bottom}};var y={data:{datasets:[{label:"Price",type:"line",backgroundColor:"rgb(242, 169, 0)",borderColor:"rgb(242, 169, 0)",pointRadius:"0",segment:{borderColor:function(e){return e.p0.parsed.y<e.p1.parsed.y?"rgb(0, 255, 0)":"rgb(255, 0, 0)"}}},{label:"Volume",backgroundColor:"rgb(0, 0, 0, 0.2)",hoverBackgroundColor:"rgb(0, 0, 0, 0.6)",type:"bar",yAxisID:"y2"}]},options:{interaction:{intersect:!1,mode:"index"},scales:{x:{ticks:{autoSkipPadding:12,maxRotation:30}},y:{type:"linear",position:"left",title:{display:!0,text:"Price [\u20ac / BTC]"}},y2:{type:"linear",position:"right",title:{display:!0,text:"Volume [\u20ac]"}}},plugins:{legend:{display:!1},title:{display:!0,text:"Daily price and trading volume of Bitcoin",color:"black",font:{family:'"Ubuntu", sans-serif',weight:"bold",size:18}},tooltip:{position:"bottom",xAlign:"center",yAlign:"bottom",usePointStyle:!0,caretPadding:4,callbacks:{label:function(e){return"".concat(e.dataset.label," ").concat(e.formattedValue," \u20ac")},labelPointStyle:function(){return{pointStyle:"circle",pointRadius:0}}}}},elements:{point:{hoverRadius:"6"}}}};var D=function(e){var t=e.pricesByDate,n=e.volumesByDate,r=Object(a.useRef)(),c=Object(a.useRef)();return Object(a.useEffect)((function(){return c.current=new O.a(r.current,y),c.current.options.maintainAspectRatio=!1,function(){return c.current.destroy()}}),[]),Object(a.useEffect)((function(){c.current.data.datasets[0].data=t,c.current.data.datasets[1].data=n,c.current.update()}),[t,n]),Object(h.jsx)("div",{className:"chart-container",children:Object(h.jsx)("canvas",{ref:r})})},w=n.p+"static/media/logo.229e5f10.svg",S=(n(21),function(e){var t=new Date(e);return t.setMonth(t.getMonth()-1),t.getTime()}(Date.now())),k=Date.now();var N=function(){var e=Object(a.useState)(S),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(k),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)([]),b=Object(s.a)(u,2),p=b[0],f=b[1],v=Object(a.useState)([]),O=Object(s.a)(v,2),x=O[0],y=O[1];return Object(a.useEffect)((function(){(function(e,t){return j.apply(this,arguments)})(n,o).then((function(e){var t=e.prices,n=e.volumes;f(t),y(n)}))}),[n,o]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("img",{src:w,width:"60",height:"60",alt:"Bitcoin Icon"}),Object(h.jsx)("h1",{children:"Bitcoin Market Analyzer"})]}),Object(h.jsxs)("main",{children:[Object(h.jsx)("h2",{class:"section-title",children:"The date range to be analyzed"}),Object(h.jsx)(m,{startDate:d(n),endDate:d(o),onStartDateChange:function(e){return r(new Date(e.target.value).getTime()||S)},onEndDateChange:function(e){return l(new Date(e.target.value).getTime()||k)}}),Object(h.jsx)(g,{prices:p,volumes:x}),Object(h.jsx)(D,{pricesByDate:p,volumesByDate:x})]})]})};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.ae82ffdc.chunk.js.map